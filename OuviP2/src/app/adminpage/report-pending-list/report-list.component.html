<main>
  <h2 class="title">Manifestações Pendentes</h2>
  <hr class="line">

  <div *ngIf="isLoading">
    <app-spinner></app-spinner>
  </div>

  <div *ngIf="!isLoading && reportList.length > 0">
    <input type="text" class="input" placeholder="Busque por uma manifestação..." [(ngModel)]="searchText" (input)="filterReports()">
  </div>
  

  <section class="my-reports" *ngIf="!isLoading">

    <div *ngIf="!isLoading && (useFilteredReports ? filteredReports.length : reportList.length) === 0">
      <p style="text-align: center; margin: 2rem;">Ainda não há manifestações!</p>
    </div>
    
    <div class="reporte" *ngFor="let report of (useFilteredReports ? filteredReports : reportList)">

      <div class="header" [style.background-color]="getStatusColor('Pendente')">
        <div class="info">
          <svg class="icon-tipo-manifestacao" viewBox="0 0 30 27" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M29.6624 22.9173C30.6237 24.5837 29.417 26.6667 27.4969 26.6667H2.50283C0.579025 26.6667 -0.62212 24.5805 0.337359 22.9173L12.8345 1.24922C13.7964 -0.417916 16.2054 -0.414896 17.1655 1.24922L29.6624 22.9173ZM15 18.4375C13.6768 18.4375 12.6042 19.5102 12.6042 20.8333C12.6042 22.1565 13.6768 23.2292 15 23.2292C16.3232 23.2292 17.3958 22.1565 17.3958 20.8333C17.3958 19.5102 16.3232 18.4375 15 18.4375ZM12.7254 9.82573L13.1117 16.9091C13.1298 17.2405 13.4039 17.5 13.7358 17.5H16.2642C16.5962 17.5 16.8702 17.2405 16.8883 16.9091L17.2746 9.82573C17.2942 9.46771 17.0091 9.16666 16.6506 9.16666H13.3494C12.9908 9.16666 12.7058 9.46771 12.7254 9.82573Z"
              fill="var(--white)" />
          </svg>

          <h3 class="tipo-manifestacao">{{ report.tipoReporte }}</h3>
        </div>

        <div class="info">
          <p class="categoria">{{ report.categoria }}</p>
        </div>
      </div>

      <div class="infos">
        <div class="info">
          <svg class="icon-tipo-manifestacao" viewBox="0 0 30 27" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M15 15.5C19.7344 15.5 23.5714 12.0307 23.5714 7.75C23.5714 3.46934 19.7344 0 15 0C10.2656 0 6.42857 3.46934 6.42857 7.75C6.42857 12.0307 10.2656 15.5 15 15.5ZM21 17.4375H19.8817C18.3951 18.0551 16.7411 18.4062 15 18.4062C13.2589 18.4062 11.6116 18.0551 10.1183 17.4375H9C4.03125 17.4375 0 21.0824 0 25.575V28.0938C0 29.6982 1.43973 31 3.21429 31H26.7857C28.5603 31 30 29.6982 30 28.0938V25.575C30 21.0824 25.9688 17.4375 21 17.4375Z"
              [style.fill]="getStatusColor('Pendente')" />
          </svg>
          <p>{{ report.nome }}</p>
        </div>

        <div class="info">
          <svg class="icon-tipo-manifestacao" viewBox="0 0 30 27" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M1.875 27.1875C1.875 28.7402 3.13477 30 4.6875 30H25.3125C26.8652 30 28.125 28.7402 28.125 27.1875V11.25H1.875V27.1875ZM20.625 15.7031C20.625 15.3164 20.9414 15 21.3281 15H23.6719C24.0586 15 24.375 15.3164 24.375 15.7031V18.0469C24.375 18.4336 24.0586 18.75 23.6719 18.75H21.3281C20.9414 18.75 20.625 18.4336 20.625 18.0469V15.7031ZM20.625 23.2031C20.625 22.8164 20.9414 22.5 21.3281 22.5H23.6719C24.0586 22.5 24.375 22.8164 24.375 23.2031V25.5469C24.375 25.9336 24.0586 26.25 23.6719 26.25H21.3281C20.9414 26.25 20.625 25.9336 20.625 25.5469V23.2031ZM13.125 15.7031C13.125 15.3164 13.4414 15 13.8281 15H16.1719C16.5586 15 16.875 15.3164 16.875 15.7031V18.0469C16.875 18.4336 16.5586 18.75 16.1719 18.75H13.8281C13.4414 18.75 13.125 18.4336 13.125 18.0469V15.7031ZM13.125 23.2031C13.125 22.8164 13.4414 22.5 13.8281 22.5H16.1719C16.5586 22.5 16.875 22.8164 16.875 23.2031V25.5469C16.875 25.9336 16.5586 26.25 16.1719 26.25H13.8281C13.4414 26.25 13.125 25.9336 13.125 25.5469V23.2031ZM5.625 15.7031C5.625 15.3164 5.94141 15 6.32812 15H8.67188C9.05859 15 9.375 15.3164 9.375 15.7031V18.0469C9.375 18.4336 9.05859 18.75 8.67188 18.75H6.32812C5.94141 18.75 5.625 18.4336 5.625 18.0469V15.7031ZM5.625 23.2031C5.625 22.8164 5.94141 22.5 6.32812 22.5H8.67188C9.05859 22.5 9.375 22.8164 9.375 23.2031V25.5469C9.375 25.9336 9.05859 26.25 8.67188 26.25H6.32812C5.94141 26.25 5.625 25.9336 5.625 25.5469V23.2031ZM25.3125 3.75H22.5V0.9375C22.5 0.421875 22.0781 0 21.5625 0H19.6875C19.1719 0 18.75 0.421875 18.75 0.9375V3.75H11.25V0.9375C11.25 0.421875 10.8281 0 10.3125 0H8.4375C7.92188 0 7.5 0.421875 7.5 0.9375V3.75H4.6875C3.13477 3.75 1.875 5.00977 1.875 6.5625V9.375H28.125V6.5625C28.125 5.00977 26.8652 3.75 25.3125 3.75Z"
              [style.fill]="getStatusColor('Pendente')" />
          </svg>
          <p>{{ report.dataReporte | date: 'dd/MM/yyyy'}}</p>
        </div>

        <div class="info">
          <button class="button" [style.background-color]="getStatusColor('Pendente')" (click)="viewReportDetails(report.id)">Ver detalhes</button>
        </div>
      </div>

    </div>
  </section>
</main>